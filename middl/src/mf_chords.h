/*
**  (C) 2008 by Remo Dentato (rdentato@users.sourceforge.net)
**
** Permission to use, copy, modify and distribute this code and
** its documentation for any purpose is hereby granted without
** fee, provided that the above copyright notice, or equivalent
** attribution acknowledgement, appears in all copies and
** supporting documentation.
**
** Copyright holder makes no representations about the suitability
** of this software for any purpose. It is provided "as is" without
** express or implied warranty.
*/

#ifdef MIDDL_C
#undef MIDDL_H
#endif

#ifdef MIDDL_H

#define c_p4                       0 
#define c_p4_1                     1 
#define c_p4_2                     2 
#define c_p4_3                     3 
#define c_p9                       4 
#define c_p9_1                     5 
#define c_p9_2                     6 
#define c_p9_3                     7 
#define c_11                       8 
#define c_11_1                     9 
#define c_11_2                    10 
#define c_11_3                    11 
#define c_11_4                    12 
#define c_11_5                    13 
#define c_5                       14 
#define c_5_1                     15 
#define c_5_2                     16 
#define c_6                       17 
#define c_6_1                     18 
#define c_6_2                     19 
#define c_6_3                     20 
#define c_7                       21 
#define c_7_5b                    22 
#define c_7_5b_1                  23 
#define c_7_5b_2                  24 
#define c_7_5b_3                  25 
#define c_7_1                     26 
#define c_7_2                     27 
#define c_7_3                     28 
#define c_7sus                    29 
#define c_7sus9                   30 
#define c_7sus9_1                 31 
#define c_7sus9_2                 32 
#define c_7sus9_3                 33 
#define c_7sus_1                  34 
#define c_7sus_2                  35 
#define c_7sus_3                  36 
#define c_9                       37 
#define c_9_1                     38 
#define c_9_2                     39 
#define c_9_3                     40 
#define c_9_4                     41 
#define c_aug                     42 
#define c_aug7                    43 
#define c_aug7_1                  44 
#define c_aug7_2                  45 
#define c_aug7_3                  46 
#define c_aug_1                   47 
#define c_aug_2                   48 
#define c_dim                     49 
#define c_dim7                    50 
#define c_dim7_1                  51 
#define c_dim7_2                  52 
#define c_dim7_3                  53 
#define c_dim9                    54 
#define c_dim9_1                  55 
#define c_dim9_2                  56 
#define c_dim9_3                  57 
#define c_dim9_4                  58 
#define c_dim_1                   59 
#define c_dim_2                   60 
#define c_maj                     61 
#define c_maj7                    62 
#define c_maj7_1                  63 
#define c_maj7_2                  64 
#define c_maj7_3                  65 
#define c_maj9                    66 
#define c_maj9_1                  67 
#define c_maj9_2                  68 
#define c_maj9_3                  69 
#define c_maj9_4                  70 
#define c_maj_1                   71 
#define c_maj_2                   72 
#define c_min                     73 
#define c_min6                    74 
#define c_min6_1                  75 
#define c_min6_2                  76 
#define c_min6_3                  77 
#define c_min7                    78 
#define c_min7_5b                 79 
#define c_min7_5b_1               80 
#define c_min7_5b_2               81 
#define c_min7_5b_3               82 
#define c_min7_1                  83 
#define c_min7_2                  84 
#define c_min7_3                  85 
#define c_min9                    86 
#define c_min9_1                  87 
#define c_min9_2                  88 
#define c_min9_3                  89 
#define c_min9_4                  90 
#define c_min_1                   91 
#define c_min_2                   92 
#define c_sus                     93 
#define c_sus9                    94 
#define c_sus9_1                  95 
#define c_sus9_2                  96 
#define c_sus_1                   97 
#define c_sus_2                   98 

#define chord_max                 99

int mf_chordbyname(char *name);
int mf_gchordbyname(char *name);
char *mf_chordnotes(char base, char *type);

#define mf_chordend -128

#endif /* MIDDL_H */

#ifdef MIDDL_C

static char chords[] = {
 /*   0 "(4)"            */ 0,4,7,17,             /*  4      0       0   */
 /*   1 "(4):1"          */ 0,4,5,7,              /*  4      4       4   */
 /*   2 "(4):2"          */ 12,4,7,17,            /*  4      8       8   */
 /*   3 "(4):3"          */ 0,4,-15,5,            /*  4      12      12  */
 /*   4 "(9)"            */ 0,4,7,14,             /*  4      16      16  */
 /*   5 "(9):1"          */ 0,4,7,2,              /*  4      20      20  */
 /*   6 "(9):2"          */ 12,4,7,14,            /*  4      24      24  */
 /*   7 "(9):3"          */ 0,4,-15,2,            /*  4      28      28  */
 /*   8 "11"             */ 0,4,7,10,14,17,       /*  6      32      32  */
 /*   9 "11:1"           */ 0,4,7,10,14,5,        /*  6      38      38  */
 /*  10 "11:2"           */ 12,4,7,10,14,17,      /*  6      44      44  */
 /*  11 "11:3"           */ 0,4,7,10,2,5,         /*  6      50      50  */
 /*  12 "11:4"           */ 0,4,7,-12,2,5,        /*  6      56      56  */
 /*  13 "11:5"           */ 0,4,-15,-12,2,5,      /*  6      62      62  */
 /*  14 "5"              */ 0,7,                  /*  2      68      68  */
 /*  15 "5:1"            */ 0,-15,                /*  2      70      70  */
 /*  16 "5:2"            */ 12,7,                 /*  2      72      72  */
 /*  17 "6"              */ 0,4,7,9,              /*  4      74      74  */
 /*  18 "6:1"            */ 0,4,7,-13,            /*  4      78      78  */
 /*  19 "6:2"            */ 12,4,7,9,             /*  4      82      82  */
 /*  20 "6:3"            */ 0,4,-15,-13,          /*  4      86      86  */
 /*  21 "7"              */ 0,4,7,10,             /*  4      90      90  */
 /*  22 "7(5b)"          */ 0,4,6,10,             /*  4      94      94  */
 /*  23 "7(5b):1"        */ 0,4,6,-12,            /*  4      98      98  */
 /*  24 "7(5b):2"        */ 12,4,6,10,            /*  4      102     102 */
 /*  25 "7(5b):3"        */ 0,4,-16,-12,          /*  4      106     106 */
 /*  26 "7:1"            */ 0,4,7,-12,            /*  4      110     110 */
 /*  27 "7:2"            */ 12,4,7,10,            /*  4      114     114 */
 /*  28 "7:3"            */ 0,4,-15,-12,          /*  4      118     118 */
 /*  29 "7sus"           */ 0,5,7,10,             /*  4      122     122 */
 /*  30 "7sus9"          */ 0,2,7,10,             /*  4      126     126 */
 /*  31 "7sus9:1"        */ 0,2,7,-12,            /*  4      130     130 */
 /*  32 "7sus9:2"        */ 12,2,7,10,            /*  4      134     134 */
 /*  33 "7sus9:3"        */ 0,2,-15,-12,          /*  4      138     138 */
 /*  34 "7sus:1"         */ 0,5,7,-12,            /*  4      142     142 */
 /*  35 "7sus:2"         */ 12,5,7,10,            /*  4      146     146 */
 /*  36 "7sus:3"         */ 0,5,-15,-12,          /*  4      150     150 */
 /*  37 "9"              */ 0,4,7,10,14,          /*  5      154     154 */
 /*  38 "9:1"            */ 0,4,7,10,2,           /*  5      159     159 */
 /*  39 "9:2"            */ 12,4,7,10,14,         /*  5      164     164 */
 /*  40 "9:3"            */ 0,4,7,-12,2,          /*  5      169     169 */
 /*  41 "9:4"            */ 0,4,-15,-12,2,        /*  5      174     174 */
 /*  42 "aug"            */ 0,3,8,                /*  3      179     179 */
 /*  43 "aug7"           */ 0,4,8,11,             /*  4      182     182 */
 /*  44 "aug7:1"         */ 0,4,8,-11,            /*  4      186     186 */
 /*  45 "aug7:2"         */ 12,4,8,11,            /*  4      190     190 */
 /*  46 "aug7:3"         */ 0,4,-14,-11,          /*  4      194     194 */
 /*  47 "aug:1"          */ 0,3,-14,              /*  3      198     198 */
 /*  48 "aug:2"          */ 12,3,8,               /*  3      201     201 */
 /*  49 "dim"            */ 0,3,6,                /*  3      204     204 */
 /*  50 "dim7"           */ 0,3,6,9,              /*  4      207     207 */
 /*  51 "dim7:1"         */ 0,3,6,-13,            /*  4      211     0   */
 /*  52 "dim7:2"         */ 12,3,6,9,             /*  4      215     4   */
 /*  53 "dim7:3"         */ 0,3,-16,-13,          /*  4      219     8   */
 /*  54 "dim9"           */ 0,4,7,10,13,          /*  5      223     12  */
 /*  55 "dim9:1"         */ 0,4,7,10,1,           /*  5      228     17  */
 /*  56 "dim9:2"         */ 12,4,7,10,13,         /*  5      233     22  */
 /*  57 "dim9:3"         */ 0,4,7,-12,1,          /*  5      238     27  */
 /*  58 "dim9:4"         */ 0,4,-15,-12,1,        /*  5      243     32  */
 /*  59 "dim:1"          */ 0,3,-16,              /*  3      248     37  */
 /*  60 "dim:2"          */ 12,3,6,               /*  3      251     40  */
 /*  61 "maj"            */ 0,4,7,                /*  3      254     43  */
 /*  62 "maj7"           */ 0,3,7,11,             /*  4      257     46  */
 /*  63 "maj7:1"         */ 0,3,7,-11,            /*  4      261     50  */
 /*  64 "maj7:2"         */ 12,3,7,11,            /*  4      265     54  */
 /*  65 "maj7:3"         */ 0,3,-15,-11,          /*  4      269     58  */
 /*  66 "maj9"           */ 0,4,7,11,14,          /*  5      273     62  */
 /*  67 "maj9:1"         */ 0,4,7,11,2,           /*  5      278     67  */
 /*  68 "maj9:2"         */ 12,4,7,11,14,         /*  5      283     72  */
 /*  69 "maj9:3"         */ 0,4,7,-11,2,          /*  5      288     77  */
 /*  70 "maj9:4"         */ 0,4,-15,-11,2,        /*  5      293     82  */
 /*  71 "maj:1"          */ 0,4,-15,              /*  3      298     87  */
 /*  72 "maj:2"          */ 12,4,7,               /*  3      301     90  */
 /*  73 "min"            */ 0,3,7,                /*  3      304     93  */
 /*  74 "min6"           */ 0,3,7,9,              /*  4      307     96  */
 /*  75 "min6:1"         */ 0,3,7,-13,            /*  4      311     100 */
 /*  76 "min6:2"         */ 12,3,7,9,             /*  4      315     104 */
 /*  77 "min6:3"         */ 0,3,-15,-13,          /*  4      319     108 */
 /*  78 "min7"           */ 0,3,7,10,             /*  4      323     112 */
 /*  79 "min7(5b)"       */ 0,3,6,10,             /*  4      327     116 */
 /*  80 "min7(5b):1"     */ 0,3,6,-12,            /*  4      331     120 */
 /*  81 "min7(5b):2"     */ 12,3,6,10,            /*  4      335     124 */
 /*  82 "min7(5b):3"     */ 0,3,-16,-12,          /*  4      339     128 */
 /*  83 "min7:1"         */ 0,3,7,-12,            /*  4      343     132 */
 /*  84 "min7:2"         */ 12,3,7,10,            /*  4      347     136 */
 /*  85 "min7:3"         */ 0,3,-15,-12,          /*  4      351     140 */
 /*  86 "min9"           */ 0,3,7,10,14,          /*  5      355     144 */
 /*  87 "min9:1"         */ 0,3,7,10,2,           /*  5      360     149 */
 /*  88 "min9:2"         */ 12,3,7,10,14,         /*  5      365     154 */
 /*  89 "min9:3"         */ 0,3,7,-12,2,          /*  5      370     159 */
 /*  90 "min9:4"         */ 0,3,-15,-12,2,        /*  5      375     164 */
 /*  91 "min:1"          */ 0,3,-15,              /*  3      380     169 */
 /*  92 "min:2"          */ 12,3,7,               /*  3      383     172 */
 /*  93 "sus"            */ 0,5,7,                /*  3      386     175 */
 /*  94 "sus9"           */ 0,7,14,               /*  3      389     178 */
 /*  95 "sus9:1"         */ 0,7,2,                /*  3      392     181 */
 /*  96 "sus9:2"         */ 12,7,14,              /*  3      395     184 */
 /*  97 "sus:1"          */ 0,5,-15,              /*  3      398     187 */
 /*  98 "sus:2"          */ 12,5,7,               /*  3      401     190 */
 /*  99 NULL             */ 0,0,0,0               /*         404     193 */
};

static unsigned char choffset_[] = {
 /*   0 "(4)"             0,4,7,17,               4      0      */  0  ,
 /*   1 "(4):1"           0,4,5,7,                4      4      */  4  ,
 /*   2 "(4):2"           12,4,7,17,              4      8      */  8  ,
 /*   3 "(4):3"           0,4,-15,5,              4      12     */  12 ,
 /*   4 "(9)"             0,4,7,14,               4      16     */  16 ,
 /*   5 "(9):1"           0,4,7,2,                4      20     */  20 ,
 /*   6 "(9):2"           12,4,7,14,              4      24     */  24 ,
 /*   7 "(9):3"           0,4,-15,2,              4      28     */  28 ,
 /*   8 "11"              0,4,7,10,14,17,         6      32     */  32 ,
 /*   9 "11:1"            0,4,7,10,14,5,          6      38     */  38 ,
 /*  10 "11:2"            12,4,7,10,14,17,        6      44     */  44 ,
 /*  11 "11:3"            0,4,7,10,2,5,           6      50     */  50 ,
 /*  12 "11:4"            0,4,7,-12,2,5,          6      56     */  56 ,
 /*  13 "11:5"            0,4,-15,-12,2,5,        6      62     */  62 ,
 /*  14 "5"               0,7,                    2      68     */  68 ,
 /*  15 "5:1"             0,-15,                  2      70     */  70 ,
 /*  16 "5:2"             12,7,                   2      72     */  72 ,
 /*  17 "6"               0,4,7,9,                4      74     */  74 ,
 /*  18 "6:1"             0,4,7,-13,              4      78     */  78 ,
 /*  19 "6:2"             12,4,7,9,               4      82     */  82 ,
 /*  20 "6:3"             0,4,-15,-13,            4      86     */  86 ,
 /*  21 "7"               0,4,7,10,               4      90     */  90 ,
 /*  22 "7(5b)"           0,4,6,10,               4      94     */  94 ,
 /*  23 "7(5b):1"         0,4,6,-12,              4      98     */  98 ,
 /*  24 "7(5b):2"         12,4,6,10,              4      102    */  102,
 /*  25 "7(5b):3"         0,4,-16,-12,            4      106    */  106,
 /*  26 "7:1"             0,4,7,-12,              4      110    */  110,
 /*  27 "7:2"             12,4,7,10,              4      114    */  114,
 /*  28 "7:3"             0,4,-15,-12,            4      118    */  118,
 /*  29 "7sus"            0,5,7,10,               4      122    */  122,
 /*  30 "7sus9"           0,2,7,10,               4      126    */  126,
 /*  31 "7sus9:1"         0,2,7,-12,              4      130    */  130,
 /*  32 "7sus9:2"         12,2,7,10,              4      134    */  134,
 /*  33 "7sus9:3"         0,2,-15,-12,            4      138    */  138,
 /*  34 "7sus:1"          0,5,7,-12,              4      142    */  142,
 /*  35 "7sus:2"          12,5,7,10,              4      146    */  146,
 /*  36 "7sus:3"          0,5,-15,-12,            4      150    */  150,
 /*  37 "9"               0,4,7,10,14,            5      154    */  154,
 /*  38 "9:1"             0,4,7,10,2,             5      159    */  159,
 /*  39 "9:2"             12,4,7,10,14,           5      164    */  164,
 /*  40 "9:3"             0,4,7,-12,2,            5      169    */  169,
 /*  41 "9:4"             0,4,-15,-12,2,          5      174    */  174,
 /*  42 "aug"             0,3,8,                  3      179    */  179,
 /*  43 "aug7"            0,4,8,11,               4      182    */  182,
 /*  44 "aug7:1"          0,4,8,-11,              4      186    */  186,
 /*  45 "aug7:2"          12,4,8,11,              4      190    */  190,
 /*  46 "aug7:3"          0,4,-14,-11,            4      194    */  194,
 /*  47 "aug:1"           0,3,-14,                3      198    */  198,
 /*  48 "aug:2"           12,3,8,                 3      201    */  201,
 /*  49 "dim"             0,3,6,                  3      204    */  204,
 /*  50 "dim7"            0,3,6,9,                4      207    */  207,
 /*  51 "dim7:1"          0,3,6,-13,              4      211    */  0  ,
 /*  52 "dim7:2"          12,3,6,9,               4      215    */  4  ,
 /*  53 "dim7:3"          0,3,-16,-13,            4      219    */  8  ,
 /*  54 "dim9"            0,4,7,10,13,            5      223    */  12 ,
 /*  55 "dim9:1"          0,4,7,10,1,             5      228    */  17 ,
 /*  56 "dim9:2"          12,4,7,10,13,           5      233    */  22 ,
 /*  57 "dim9:3"          0,4,7,-12,1,            5      238    */  27 ,
 /*  58 "dim9:4"          0,4,-15,-12,1,          5      243    */  32 ,
 /*  59 "dim:1"           0,3,-16,                3      248    */  37 ,
 /*  60 "dim:2"           12,3,6,                 3      251    */  40 ,
 /*  61 "maj"             0,4,7,                  3      254    */  43 ,
 /*  62 "maj7"            0,3,7,11,               4      257    */  46 ,
 /*  63 "maj7:1"          0,3,7,-11,              4      261    */  50 ,
 /*  64 "maj7:2"          12,3,7,11,              4      265    */  54 ,
 /*  65 "maj7:3"          0,3,-15,-11,            4      269    */  58 ,
 /*  66 "maj9"            0,4,7,11,14,            5      273    */  62 ,
 /*  67 "maj9:1"          0,4,7,11,2,             5      278    */  67 ,
 /*  68 "maj9:2"          12,4,7,11,14,           5      283    */  72 ,
 /*  69 "maj9:3"          0,4,7,-11,2,            5      288    */  77 ,
 /*  70 "maj9:4"          0,4,-15,-11,2,          5      293    */  82 ,
 /*  71 "maj:1"           0,4,-15,                3      298    */  87 ,
 /*  72 "maj:2"           12,4,7,                 3      301    */  90 ,
 /*  73 "min"             0,3,7,                  3      304    */  93 ,
 /*  74 "min6"            0,3,7,9,                4      307    */  96 ,
 /*  75 "min6:1"          0,3,7,-13,              4      311    */  100,
 /*  76 "min6:2"          12,3,7,9,               4      315    */  104,
 /*  77 "min6:3"          0,3,-15,-13,            4      319    */  108,
 /*  78 "min7"            0,3,7,10,               4      323    */  112,
 /*  79 "min7(5b)"        0,3,6,10,               4      327    */  116,
 /*  80 "min7(5b):1"      0,3,6,-12,              4      331    */  120,
 /*  81 "min7(5b):2"      12,3,6,10,              4      335    */  124,
 /*  82 "min7(5b):3"      0,3,-16,-12,            4      339    */  128,
 /*  83 "min7:1"          0,3,7,-12,              4      343    */  132,
 /*  84 "min7:2"          12,3,7,10,              4      347    */  136,
 /*  85 "min7:3"          0,3,-15,-12,            4      351    */  140,
 /*  86 "min9"            0,3,7,10,14,            5      355    */  144,
 /*  87 "min9:1"          0,3,7,10,2,             5      360    */  149,
 /*  88 "min9:2"          12,3,7,10,14,           5      365    */  154,
 /*  89 "min9:3"          0,3,7,-12,2,            5      370    */  159,
 /*  90 "min9:4"          0,3,-15,-12,2,          5      375    */  164,
 /*  91 "min:1"           0,3,-15,                3      380    */  169,
 /*  92 "min:2"           12,3,7,                 3      383    */  172,
 /*  93 "sus"             0,5,7,                  3      386    */  175,
 /*  94 "sus9"            0,7,14,                 3      389    */  178,
 /*  95 "sus9:1"          0,7,2,                  3      392    */  181,
 /*  96 "sus9:2"          12,7,14,                3      395    */  184,
 /*  97 "sus:1"           0,5,-15,                3      398    */  187,
 /*  98 "sus:2"           12,5,7,                 3      401    */  190,
 /*  99 NULL              0,0,0,0,0                      404    */  193,
};                               

#define chord_notes(chnum)  (chords + chord_offset(chnum))
#define chord_offset(chnum) (choffset_[chnum] + ((chnum) > 50 ? 211 :0))
#define chord_length(chnum) (chord_offset((chnum)+1) - chord_offset(chnum))

#ifdef MIDDL_STRINGS

static char *chord_names[] = {
 /*   0 */ "(4)"       ,     /* 0,4,7,17,              4      0       0   */
 /*   1 */ "(4):1"     ,     /* 0,4,5,7,               4      4       4   */
 /*   2 */ "(4):2"     ,     /* 12,4,7,17,             4      8       8   */
 /*   3 */ "(4):3"     ,     /* 0,4,-15,5,             4      12      12  */
 /*   4 */ "(9)"       ,     /* 0,4,7,14,              4      16      16  */
 /*   5 */ "(9):1"     ,     /* 0,4,7,2,               4      20      20  */
 /*   6 */ "(9):2"     ,     /* 12,4,7,14,             4      24      24  */
 /*   7 */ "(9):3"     ,     /* 0,4,-15,2,             4      28      28  */
 /*   8 */ "11"        ,     /* 0,4,7,10,14,17,        6      32      32  */
 /*   9 */ "11:1"      ,     /* 0,4,7,10,14,5,         6      38      38  */
 /*  10 */ "11:2"      ,     /* 12,4,7,10,14,17,       6      44      44  */
 /*  11 */ "11:3"      ,     /* 0,4,7,10,2,5,          6      50      50  */
 /*  12 */ "11:4"      ,     /* 0,4,7,-12,2,5,         6      56      56  */
 /*  13 */ "11:5"      ,     /* 0,4,-15,-12,2,5,       6      62      62  */
 /*  14 */ "5"         ,     /* 0,7,                   2      68      68  */
 /*  15 */ "5:1"       ,     /* 0,-15,                 2      70      70  */
 /*  16 */ "5:2"       ,     /* 12,7,                  2      72      72  */
 /*  17 */ "6"         ,     /* 0,4,7,9,               4      74      74  */
 /*  18 */ "6:1"       ,     /* 0,4,7,-13,             4      78      78  */
 /*  19 */ "6:2"       ,     /* 12,4,7,9,              4      82      82  */
 /*  20 */ "6:3"       ,     /* 0,4,-15,-13,           4      86      86  */
 /*  21 */ "7"         ,     /* 0,4,7,10,              4      90      90  */
 /*  22 */ "7(5b)"     ,     /* 0,4,6,10,              4      94      94  */
 /*  23 */ "7(5b):1"   ,     /* 0,4,6,-12,             4      98      98  */
 /*  24 */ "7(5b):2"   ,     /* 12,4,6,10,             4      102     102 */
 /*  25 */ "7(5b):3"   ,     /* 0,4,-16,-12,           4      106     106 */
 /*  26 */ "7:1"       ,     /* 0,4,7,-12,             4      110     110 */
 /*  27 */ "7:2"       ,     /* 12,4,7,10,             4      114     114 */
 /*  28 */ "7:3"       ,     /* 0,4,-15,-12,           4      118     118 */
 /*  29 */ "7sus"      ,     /* 0,5,7,10,              4      122     122 */
 /*  30 */ "7sus9"     ,     /* 0,2,7,10,              4      126     126 */
 /*  31 */ "7sus9:1"   ,     /* 0,2,7,-12,             4      130     130 */
 /*  32 */ "7sus9:2"   ,     /* 12,2,7,10,             4      134     134 */
 /*  33 */ "7sus9:3"   ,     /* 0,2,-15,-12,           4      138     138 */
 /*  34 */ "7sus:1"    ,     /* 0,5,7,-12,             4      142     142 */
 /*  35 */ "7sus:2"    ,     /* 12,5,7,10,             4      146     146 */
 /*  36 */ "7sus:3"    ,     /* 0,5,-15,-12,           4      150     150 */
 /*  37 */ "9"         ,     /* 0,4,7,10,14,           5      154     154 */
 /*  38 */ "9:1"       ,     /* 0,4,7,10,2,            5      159     159 */
 /*  39 */ "9:2"       ,     /* 12,4,7,10,14,          5      164     164 */
 /*  40 */ "9:3"       ,     /* 0,4,7,-12,2,           5      169     169 */
 /*  41 */ "9:4"       ,     /* 0,4,-15,-12,2,         5      174     174 */
 /*  42 */ "aug"       ,     /* 0,3,8,                 3      179     179 */
 /*  43 */ "aug7"      ,     /* 0,4,8,11,              4      182     182 */
 /*  44 */ "aug7:1"    ,     /* 0,4,8,-11,             4      186     186 */
 /*  45 */ "aug7:2"    ,     /* 12,4,8,11,             4      190     190 */
 /*  46 */ "aug7:3"    ,     /* 0,4,-14,-11,           4      194     194 */
 /*  47 */ "aug:1"     ,     /* 0,3,-14,               3      198     198 */
 /*  48 */ "aug:2"     ,     /* 12,3,8,                3      201     201 */
 /*  49 */ "dim"       ,     /* 0,3,6,                 3      204     204 */
 /*  50 */ "dim7"      ,     /* 0,3,6,9,               4      207     207 */
 /*  51 */ "dim7:1"    ,     /* 0,3,6,-13,             4      211     0   */
 /*  52 */ "dim7:2"    ,     /* 12,3,6,9,              4      215     4   */
 /*  53 */ "dim7:3"    ,     /* 0,3,-16,-13,           4      219     8   */
 /*  54 */ "dim9"      ,     /* 0,4,7,10,13,           5      223     12  */
 /*  55 */ "dim9:1"    ,     /* 0,4,7,10,1,            5      228     17  */
 /*  56 */ "dim9:2"    ,     /* 12,4,7,10,13,          5      233     22  */
 /*  57 */ "dim9:3"    ,     /* 0,4,7,-12,1,           5      238     27  */
 /*  58 */ "dim9:4"    ,     /* 0,4,-15,-12,1,         5      243     32  */
 /*  59 */ "dim:1"     ,     /* 0,3,-16,               3      248     37  */
 /*  60 */ "dim:2"     ,     /* 12,3,6,                3      251     40  */
 /*  61 */ "maj"       ,     /* 0,4,7,                 3      254     43  */
 /*  62 */ "maj7"      ,     /* 0,3,7,11,              4      257     46  */
 /*  63 */ "maj7:1"    ,     /* 0,3,7,-11,             4      261     50  */
 /*  64 */ "maj7:2"    ,     /* 12,3,7,11,             4      265     54  */
 /*  65 */ "maj7:3"    ,     /* 0,3,-15,-11,           4      269     58  */
 /*  66 */ "maj9"      ,     /* 0,4,7,11,14,           5      273     62  */
 /*  67 */ "maj9:1"    ,     /* 0,4,7,11,2,            5      278     67  */
 /*  68 */ "maj9:2"    ,     /* 12,4,7,11,14,          5      283     72  */
 /*  69 */ "maj9:3"    ,     /* 0,4,7,-11,2,           5      288     77  */
 /*  70 */ "maj9:4"    ,     /* 0,4,-15,-11,2,         5      293     82  */
 /*  71 */ "maj:1"     ,     /* 0,4,-15,               3      298     87  */
 /*  72 */ "maj:2"     ,     /* 12,4,7,                3      301     90  */
 /*  73 */ "min"       ,     /* 0,3,7,                 3      304     93  */
 /*  74 */ "min6"      ,     /* 0,3,7,9,               4      307     96  */
 /*  75 */ "min6:1"    ,     /* 0,3,7,-13,             4      311     100 */
 /*  76 */ "min6:2"    ,     /* 12,3,7,9,              4      315     104 */
 /*  77 */ "min6:3"    ,     /* 0,3,-15,-13,           4      319     108 */
 /*  78 */ "min7"      ,     /* 0,3,7,10,              4      323     112 */
 /*  79 */ "min7(5b)"  ,     /* 0,3,6,10,              4      327     116 */
 /*  80 */ "min7(5b):1",     /* 0,3,6,-12,             4      331     120 */
 /*  81 */ "min7(5b):2",     /* 12,3,6,10,             4      335     124 */
 /*  82 */ "min7(5b):3",     /* 0,3,-16,-12,           4      339     128 */
 /*  83 */ "min7:1"    ,     /* 0,3,7,-12,             4      343     132 */
 /*  84 */ "min7:2"    ,     /* 12,3,7,10,             4      347     136 */
 /*  85 */ "min7:3"    ,     /* 0,3,-15,-12,           4      351     140 */
 /*  86 */ "min9"      ,     /* 0,3,7,10,14,           5      355     144 */
 /*  87 */ "min9:1"    ,     /* 0,3,7,10,2,            5      360     149 */
 /*  88 */ "min9:2"    ,     /* 12,3,7,10,14,          5      365     154 */
 /*  89 */ "min9:3"    ,     /* 0,3,7,-12,2,           5      370     159 */
 /*  90 */ "min9:4"    ,     /* 0,3,-15,-12,2,         5      375     164 */
 /*  91 */ "min:1"     ,     /* 0,3,-15,               3      380     169 */
 /*  92 */ "min:2"     ,     /* 12,3,7,                3      383     172 */
 /*  93 */ "sus"       ,     /* 0,5,7,                 3      386     175 */
 /*  94 */ "sus9"      ,     /* 0,7,14,                3      389     178 */
 /*  95 */ "sus9:1"    ,     /* 0,7,2,                 3      392     181 */
 /*  96 */ "sus9:2"    ,     /* 12,7,14,               3      395     184 */
 /*  97 */ "sus:1"     ,     /* 0,5,-15,               3      398     187 */
 /*  98 */ "sus:2"     ,     /* 12,5,7,                3      401     190 */
 /*  99 */ NULL        ,     /* 0,0,0,0,0                     404     193 */

};


static int chord_cmp(const void *a, const void *b)
{
  return strcmp(*(char**)a, *(char **)b) ;
}

int mf_chordbyname(char *name)
{
  char **q;
  
  q = bsearch(&name, chord_names, chord_max, sizeof(char *), chord_cmp);
                           
  if (q == NULL) return 61;
  return q - chord_names;
  
}

static char crd_notes[32];

char *mf_chordnotes(char base, char *type)
{
  int k,c;
  
  c = mf_chordbyname(type);

  for (k=0; k< chord_length(c); k++);
    crd_notes[k] = base + chord_notes(c)[k];
  crd_notes[k] = mf_chordend;
  
  return crd_notes;
}

int mf_gchordbyname(char *name)
{
 return -1;
}


#else
int mf_chordbyname(char *name)
{
  return -1;  /* default to major chord */
}

int mf_gchordbyname(char *name)
{
 return -1;
}
#endif /* MIDDL_STRINGS */

#endif  /* MIDDL_C */

